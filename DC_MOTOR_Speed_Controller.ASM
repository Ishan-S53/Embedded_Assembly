ORG 0000H
SJMP MAIN
ORG 0040H
	
MAIN:
SETB P2.0
SETB P3.2
SETB P3.3
CLR P3.0
CLR P3.1
CLR P3.7
MOV TMOD, #01H

REP:
JNB P2.0, LOOP1
SETB P3.0
CLR P3.1
SJMP SPEED

LOOP1:
CLR P3.0
SETB P3.1

SPEED:
JNB P3.2, LOOP2
JNB P3.3, LOOP3
JMP LOOP4
LOOP2:
SETB P3.7
ACALL DELAY1
CLR P3.7
ACALL DELAY2
JMP LOOP4
LOOP3:
SETB P3.7
ACALL DELAY3
CLR P3.7
ACALL DELAY3
LOOP4:
JMP REP

DELAY1:
ACALL DELAY
RET

DELAY2:
ACALL DELAY
ACALL DELAY
ACALL DELAY
RET

DELAY3:
ACALL DELAY
ACALL DELAY
RET

DELAY:
MOV TH0, #0EEH
MOV TL0, #00H
SETB TR0
CHECH: JNB TF0, CHECH
CLR TR0
CLR TF0
RET

END